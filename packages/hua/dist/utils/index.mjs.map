{"version":3,"sources":["../../src/utils/logger.ts"],"names":["LOG_LEVELS","getMinLevel","envLevel","shouldLog","level","formatMessage","prefix","message","context","timestamp","contextStr","levelTag","prefixTag","makeLogger","logger","createLogger"],"mappings":"2DAwBA,IAAMA,CAAAA,CAAuC,CAC3C,MAAO,CAAA,CACP,IAAA,CAAM,EACN,IAAA,CAAM,CAAA,CACN,MAAO,CACT,CAAA,CAEA,SAASC,CAAAA,EAAsB,CAC7B,IAAMC,CAAAA,CACJ,OAAO,QAAY,GAAA,CACd,OAAA,CAAQ,KAAK,SAAA,CACd,MAAA,CACN,OAAIA,CAAAA,EAAYF,CAAAA,CAAWE,CAAQ,CAAA,GAAM,MAAA,CAChCF,EAAWE,CAAQ,CAAA,CAG1B,OAAO,OAAA,CAAY,GAAA,EACnB,QAAQ,GAAA,EAAK,QAAA,GAAa,aACZF,CAAAA,CAAW,IAAA,CAAOA,EAAW,KAC/C,CAEA,SAASG,CAAAA,CAAUC,CAAAA,CAA0B,CAC3C,OAAOJ,CAAAA,CAAWI,CAAK,CAAA,EAAKH,CAAAA,EAC9B,CAEA,SAASI,EACPC,CAAAA,CACAF,CAAAA,CACAG,EACAC,CAAAA,CACQ,CACR,IAAMC,CAAAA,CAAY,IAAI,MAAK,CAAE,WAAA,GACvBC,CAAAA,CAAaF,CAAAA,CAAU,IAAI,IAAA,CAAK,SAAA,CAAUA,CAAO,CAAC,CAAA,CAAA,CAAK,GACvDG,CAAAA,CAAWP,CAAAA,CAAM,aAAY,CAC7BQ,CAAAA,CAAYN,EAAS,CAAA,EAAGA,CAAM,IAAM,EAAA,CAC1C,OAAO,CAAA,CAAA,EAAIG,CAAS,CAAA,GAAA,EAAMG,CAAS,GAAGD,CAAQ,CAAA,EAAA,EAAKJ,CAAO,CAAA,EAAGG,CAAU,EACzE,CAEA,SAASG,EAAWP,CAAAA,CAAwB,CAC1C,OAAO,CACL,KAAA,CAAMC,EAAiBC,CAAAA,CAAsB,CACvCL,EAAU,OAAO,CAAA,EACnB,QAAQ,GAAA,CAAIE,CAAAA,CAAcC,EAAQ,OAAA,CAASC,CAAAA,CAASC,CAAO,CAAC,EAEhE,EACA,IAAA,CAAKD,CAAAA,CAAiBC,EAAsB,CACtCL,CAAAA,CAAU,MAAM,CAAA,EAClB,OAAA,CAAQ,IAAIE,CAAAA,CAAcC,CAAAA,CAAQ,OAAQC,CAAAA,CAASC,CAAO,CAAC,EAE/D,CAAA,CACA,IAAA,CAAKD,EAAiBC,CAAAA,CAAsB,CACtCL,EAAU,MAAM,CAAA,EAClB,QAAQ,IAAA,CAAKE,CAAAA,CAAcC,EAAQ,MAAA,CAAQC,CAAAA,CAASC,CAAO,CAAC,EAEhE,EACA,KAAA,CAAMD,CAAAA,CAAiBC,EAAsB,CACvCL,CAAAA,CAAU,OAAO,CAAA,EACnB,OAAA,CAAQ,MAAME,CAAAA,CAAcC,CAAAA,CAAQ,QAASC,CAAAA,CAASC,CAAO,CAAC,EAElE,CACF,CACF,CAGO,IAAMM,EAAiBD,CAAAA,CAAW,EAAE,EAGpC,SAASE,CAAAA,CAAaT,EAAwB,CACnD,OAAOO,CAAAA,CAAWP,CAAM,CAC1B","file":"index.mjs","sourcesContent":["/**\r\n * Logger utility\r\n *\r\n * Environment-based log level control:\r\n * - production: warn, error only\r\n * - development: all levels\r\n *\r\n * Override with LOG_LEVEL env var:\r\n * - LOG_LEVEL=debug|info|warn|error\r\n */\r\n\r\nexport type LogLevel = 'debug' | 'info' | 'warn' | 'error';\r\n\r\nexport interface LogContext {\r\n  [key: string]: unknown;\r\n}\r\n\r\nexport interface Logger {\r\n  debug(message: string, context?: LogContext): void;\r\n  info(message: string, context?: LogContext): void;\r\n  warn(message: string, context?: LogContext): void;\r\n  error(message: string, context?: LogContext): void;\r\n}\r\n\r\nconst LOG_LEVELS: Record<LogLevel, number> = {\r\n  debug: 0,\r\n  info: 1,\r\n  warn: 2,\r\n  error: 3,\r\n};\r\n\r\nfunction getMinLevel(): number {\r\n  const envLevel =\r\n    typeof process !== 'undefined'\r\n      ? (process.env?.LOG_LEVEL as LogLevel | undefined)\r\n      : undefined;\r\n  if (envLevel && LOG_LEVELS[envLevel] !== undefined) {\r\n    return LOG_LEVELS[envLevel];\r\n  }\r\n  const isProd =\r\n    typeof process !== 'undefined' &&\r\n    process.env?.NODE_ENV === 'production';\r\n  return isProd ? LOG_LEVELS.warn : LOG_LEVELS.debug;\r\n}\r\n\r\nfunction shouldLog(level: LogLevel): boolean {\r\n  return LOG_LEVELS[level] >= getMinLevel();\r\n}\r\n\r\nfunction formatMessage(\r\n  prefix: string,\r\n  level: LogLevel,\r\n  message: string,\r\n  context?: LogContext,\r\n): string {\r\n  const timestamp = new Date().toISOString();\r\n  const contextStr = context ? ` ${JSON.stringify(context)}` : '';\r\n  const levelTag = level.toUpperCase();\r\n  const prefixTag = prefix ? `${prefix}:` : '';\r\n  return `[${timestamp}] [${prefixTag}${levelTag}] ${message}${contextStr}`;\r\n}\r\n\r\nfunction makeLogger(prefix: string): Logger {\r\n  return {\r\n    debug(message: string, context?: LogContext) {\r\n      if (shouldLog('debug')) {\r\n        console.log(formatMessage(prefix, 'debug', message, context));\r\n      }\r\n    },\r\n    info(message: string, context?: LogContext) {\r\n      if (shouldLog('info')) {\r\n        console.log(formatMessage(prefix, 'info', message, context));\r\n      }\r\n    },\r\n    warn(message: string, context?: LogContext) {\r\n      if (shouldLog('warn')) {\r\n        console.warn(formatMessage(prefix, 'warn', message, context));\r\n      }\r\n    },\r\n    error(message: string, context?: LogContext) {\r\n      if (shouldLog('error')) {\r\n        console.error(formatMessage(prefix, 'error', message, context));\r\n      }\r\n    },\r\n  };\r\n}\r\n\r\n/** Default logger (no prefix) */\r\nexport const logger: Logger = makeLogger('');\r\n\r\n/** Create a named logger with a prefix */\r\nexport function createLogger(prefix: string): Logger {\r\n  return makeLogger(prefix);\r\n}\r\n"]}