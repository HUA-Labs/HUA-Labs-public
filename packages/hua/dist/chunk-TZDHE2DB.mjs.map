{"version":3,"sources":["../src/framework/utils/metadata.ts","../src/framework/branding/css-vars.ts","../src/framework/branding/tailwind-config.ts","../src/framework/middleware/i18n.ts"],"names":["generatePageMetadata","options","title","description","seo","metadata","generateCSSVariables","branding","vars","key","value","generateCSSVariablesObject","generateTailwindConfig","config","colors","fontSize","NextResponseFactory","f","url","createI18nMiddleware","request","defaultLanguage","supportedLanguages","detectionStrategy","language","acceptLanguage","preferredLang","cookieLang","pathLang","queryLang","response"],"mappings":"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","file":"chunk-TZDHE2DB.mjs","sourcesContent":["/**\r\n * @hua-labs/hua/framework - Metadata Utilities\r\n * \r\n * Next.js Metadata 생성 유틸리티 (Next.js 없이도 사용 가능)\r\n * \r\n * Next.js가 설치되어 있으면 Next.js Metadata 타입을 사용하고,\r\n * 없으면 일반 메타데이터 객체 타입을 사용합니다.\r\n * \r\n * Works with or without Next.js:\r\n * - With Next.js: Returns Next.js Metadata type\r\n * - Without Next.js: Returns generic metadata object type\r\n */\r\n\r\n// Next.js Metadata 타입 - 조건부 타입으로 타입 안전성 향상\r\n// Next.js Metadata type - Improved type safety with conditional type\r\ntype MetadataType = \r\n  // Next.js가 설치되어 있으면 실제 Metadata 타입 사용\r\n  // Use actual Metadata type if Next.js is installed\r\n  typeof import('next') extends { Metadata: infer T } ? T\r\n  // 없으면 일반 메타데이터 객체 타입 사용\r\n  // Use generic metadata object type if not installed\r\n  : {\r\n      title?: string;\r\n      description?: string;\r\n      keywords?: string[];\r\n      openGraph?: {\r\n        title?: string;\r\n        description?: string;\r\n        type?: 'website' | 'article' | 'product';\r\n        images?: Array<{ url: string }>;\r\n      };\r\n      twitter?: {\r\n        card?: 'summary' | 'summary_large_image';\r\n        title?: string;\r\n        description?: string;\r\n        images?: string[];\r\n      };\r\n    };\r\n\r\n/**\r\n * SEO 설정 타입\r\n */\r\nexport interface SEOConfig {\r\n  keywords?: string[];\r\n  ogImage?: string;\r\n  ogTitle?: string;\r\n  ogDescription?: string;\r\n  ogType?: 'website' | 'article' | 'product';\r\n}\r\n\r\n/**\r\n * 페이지 메타데이터 생성\r\n * \r\n * Next.js App Router의 `export const metadata`에서 사용할 수 있는 메타데이터를 생성합니다.\r\n * CRA/Vite 등 일반 React 앱에서도 사용 가능합니다 (React Helmet 등과 함께).\r\n * \r\n * Generates metadata that can be used in Next.js App Router's `export const metadata`.\r\n * Also works in plain React apps (CRA/Vite) with React Helmet, etc.\r\n * \r\n * @param options - 메타데이터 옵션\r\n * @param options.title - 페이지 제목\r\n * @param options.description - 페이지 설명\r\n * @param options.seo - SEO 설정 (선택적)\r\n * @returns Next.js Metadata 객체 (Next.js가 있으면) 또는 일반 메타데이터 객체 (없으면)\r\n * \r\n * @example\r\n * ```tsx\r\n * // Next.js App Router\r\n * // app/page.tsx\r\n * import { generatePageMetadata } from '@hua-labs/hua/framework';\r\n * \r\n * export const metadata = generatePageMetadata({\r\n *   title: '홈',\r\n *   description: '환영합니다',\r\n *   seo: {\r\n *     keywords: ['키워드1', '키워드2'],\r\n *     ogImage: '/og-image.png',\r\n *   },\r\n * });\r\n * \r\n * export default function HomePage() {\r\n *   return <div>...</div>;\r\n * }\r\n * ```\r\n * \r\n * @example\r\n * ```tsx\r\n * // CRA/Vite (React Helmet 사용)\r\n * import { Helmet } from 'react-helmet-async';\r\n * import { generatePageMetadata } from '@hua-labs/hua/framework';\r\n * \r\n * export default function HomePage() {\r\n *   const metadata = generatePageMetadata({\r\n *     title: 'Home',\r\n *     description: 'Welcome',\r\n *   });\r\n * \r\n *   return (\r\n *     <>\r\n *       <Helmet>\r\n *         <title>{metadata.title}</title>\r\n *         <meta name=\"description\" content={metadata.description} />\r\n *       </Helmet>\r\n *       <div>...</div>\r\n *     </>\r\n *   );\r\n * }\r\n * ```\r\n */\r\nexport function generatePageMetadata(options: {\r\n  title: string;\r\n  description?: string;\r\n  seo?: SEOConfig;\r\n}): MetadataType {\r\n  const { title, description, seo } = options;\r\n\r\n  // 메타데이터 객체 직접 구성 (타입 안전하게)\r\n  // Build metadata object directly (type-safe)\r\n  const metadata: Record<string, unknown> = {\r\n    title,\r\n    description,\r\n  };\r\n\r\n  // Keywords 추가\r\n  if (seo?.keywords && seo.keywords.length > 0) {\r\n    metadata.keywords = seo.keywords;\r\n  }\r\n\r\n  // Open Graph 메타데이터\r\n  if (seo?.ogImage || seo?.ogTitle || seo?.ogDescription || seo?.ogType) {\r\n    metadata.openGraph = {\r\n      title: seo.ogTitle || title,\r\n      description: seo.ogDescription || description,\r\n      type: seo.ogType || 'website',\r\n      ...(seo.ogImage && { images: [{ url: seo.ogImage }] }),\r\n    };\r\n  }\r\n\r\n  // Twitter Card 메타데이터 (Open Graph가 있으면 자동으로 사용)\r\n  if (seo?.ogImage) {\r\n    metadata.twitter = {\r\n      card: 'summary_large_image',\r\n      ...(seo.ogTitle && { title: seo.ogTitle }),\r\n      ...(seo.ogDescription && { description: seo.ogDescription }),\r\n      ...(seo.ogImage && { images: [seo.ogImage] }),\r\n    };\r\n  }\r\n\r\n  // MetadataType으로 타입 단언 (조건부 타입이 컴파일 타임에 올바르게 추론됨)\r\n  // Type assertion to MetadataType (conditional type is correctly inferred at compile time)\r\n  return metadata as MetadataType;\r\n}\r\n","/**\r\n * @hua-labs/hua/framework - CSS Variables Generator\r\n * \r\n * 브랜딩 설정을 CSS 변수로 자동 생성\r\n */\r\n\r\nimport type { HuaConfig } from '../types';\r\n\r\n/**\r\n * Generate CSS variables from branding configuration\r\n * \r\n * 브랜딩 설정을 CSS 변수 문자열로 변환합니다.\r\n * \r\n * @param branding - Branding configuration\r\n * @returns CSS variables string\r\n * \r\n * @example\r\n * ```ts\r\n * const css = generateCSSVariables({\r\n *   colors: { primary: '#3B82F6' },\r\n *   typography: { fontFamily: ['Inter', 'sans-serif'] },\r\n * });\r\n * // Returns: \":root {\\n  --color-primary: #3B82F6;\\n  --font-family: Inter, sans-serif;\\n}\"\r\n * ```\r\n */\r\nexport function generateCSSVariables(branding: NonNullable<HuaConfig['branding']>): string {\r\n  const vars: string[] = [];\r\n  \r\n  // 색상 변수\r\n  if (branding.colors) {\r\n    Object.entries(branding.colors).forEach(([key, value]) => {\r\n      if (value) {\r\n        vars.push(`  --color-${key}: ${value};`);\r\n      }\r\n    });\r\n  }\r\n  \r\n  // 타이포그래피 변수\r\n  if (branding.typography) {\r\n    if (branding.typography.fontFamily) {\r\n      vars.push(`  --font-family: ${branding.typography.fontFamily.join(', ')};`);\r\n    }\r\n    if (branding.typography.fontSize) {\r\n      Object.entries(branding.typography.fontSize).forEach(([key, value]) => {\r\n        if (value) {\r\n          vars.push(`  --font-size-${key}: ${value};`);\r\n        }\r\n      });\r\n    }\r\n  }\r\n  \r\n  // 커스텀 변수\r\n  if (branding.customVariables) {\r\n    Object.entries(branding.customVariables).forEach(([key, value]) => {\r\n      vars.push(`  --${key}: ${value};`);\r\n    });\r\n  }\r\n  \r\n  if (vars.length === 0) {\r\n    return '';\r\n  }\r\n  \r\n  return `:root {\\n${vars.join('\\n')}\\n}`;\r\n}\r\n\r\n/**\r\n * Generate CSS variables as object\r\n * \r\n * 브랜딩 설정을 CSS 변수 객체로 변환합니다.\r\n * \r\n * @param branding - Branding configuration\r\n * @returns CSS variables object\r\n */\r\nexport function generateCSSVariablesObject(\r\n  branding: NonNullable<HuaConfig['branding']>\r\n): Record<string, string> {\r\n  const vars: Record<string, string> = {};\r\n  \r\n  // 색상 변수\r\n  if (branding.colors) {\r\n    Object.entries(branding.colors).forEach(([key, value]) => {\r\n      if (value) {\r\n        vars[`--color-${key}`] = value;\r\n      }\r\n    });\r\n  }\r\n  \r\n  // 타이포그래피 변수\r\n  if (branding.typography) {\r\n    if (branding.typography.fontFamily) {\r\n      vars['--font-family'] = branding.typography.fontFamily.join(', ');\r\n    }\r\n    if (branding.typography.fontSize) {\r\n      Object.entries(branding.typography.fontSize).forEach(([key, value]) => {\r\n        if (value) {\r\n          vars[`--font-size-${key}`] = value;\r\n        }\r\n      });\r\n    }\r\n  }\r\n  \r\n  // 커스텀 변수\r\n  if (branding.customVariables) {\r\n    Object.entries(branding.customVariables).forEach(([key, value]) => {\r\n      vars[`--${key}`] = value;\r\n    });\r\n  }\r\n  \r\n  return vars;\r\n}\r\n","/**\r\n * @hua-labs/hua/framework - Tailwind Config Generator\r\n * \r\n * 브랜딩 설정을 Tailwind Config로 자동 생성\r\n */\r\n\r\nimport type { HuaConfig } from '../types';\r\n\r\n/**\r\n * Generate Tailwind config from branding configuration\r\n * \r\n * 브랜딩 설정을 Tailwind Config 객체로 변환합니다.\r\n * \r\n * @param branding - Branding configuration\r\n * @returns Tailwind config object\r\n * \r\n * @example\r\n * ```ts\r\n * const tailwindConfig = generateTailwindConfig({\r\n *   colors: { primary: '#3B82F6' },\r\n *   typography: { fontFamily: ['Inter', 'sans-serif'] },\r\n * });\r\n * \r\n * // Use in tailwind.config.js:\r\n * module.exports = {\r\n *   ...tailwindConfig,\r\n *   // ... other config\r\n * };\r\n * ```\r\n */\r\nexport function generateTailwindConfig(\r\n  branding: NonNullable<HuaConfig['branding']>\r\n): {\r\n  theme: {\r\n    extend: {\r\n      colors?: Record<string, string>;\r\n      fontFamily?: Record<string, string[]>;\r\n      fontSize?: Record<string, string>;\r\n    };\r\n  };\r\n} {\r\n  const config: {\r\n    theme: {\r\n      extend: {\r\n        colors?: Record<string, string>;\r\n        fontFamily?: Record<string, string[]>;\r\n        fontSize?: Record<string, string>;\r\n      };\r\n    };\r\n  } = {\r\n    theme: {\r\n      extend: {},\r\n    },\r\n  };\r\n  \r\n  // 색상 설정\r\n  if (branding.colors) {\r\n    const colors: Record<string, string> = {};\r\n    Object.entries(branding.colors).forEach(([key, value]) => {\r\n      if (value) {\r\n        colors[key] = value;\r\n      }\r\n    });\r\n    if (Object.keys(colors).length > 0) {\r\n      config.theme.extend.colors = colors;\r\n    }\r\n  }\r\n  \r\n  // 타이포그래피 설정\r\n  if (branding.typography) {\r\n    if (branding.typography.fontFamily) {\r\n      config.theme.extend.fontFamily = {\r\n        sans: branding.typography.fontFamily,\r\n      };\r\n    }\r\n    if (branding.typography.fontSize) {\r\n      const fontSize: Record<string, string> = {};\r\n      Object.entries(branding.typography.fontSize).forEach(([key, value]) => {\r\n        if (value) {\r\n          fontSize[key] = value;\r\n        }\r\n      });\r\n      if (Object.keys(fontSize).length > 0) {\r\n        config.theme.extend.fontSize = fontSize;\r\n      }\r\n    }\r\n  }\r\n  \r\n  return config;\r\n}\r\n","/**\r\n * @hua-labs/hua/framework - i18n Middleware\r\n * \r\n * i18n middleware for automatic language detection and routing\r\n * \r\n * **타입 안전성**: Next.js를 peerDependency로 사용하므로,\r\n * Next.js 프로젝트에서는 자동으로 타입이 추론됩니다.\r\n * \r\n * **Type Safety**: Next.js is used as a peerDependency,\r\n * so types are automatically inferred in Next.js projects.\r\n */\r\n\r\n// Next.js types - 조건부 import로 타입 안전성 향상\r\n// Next.js types - Improved type safety with conditional import\r\n\r\n/**\r\n * Base interface for NextRequest (when Next.js is not available)\r\n */\r\ninterface BaseNextRequest {\r\n  headers: {\r\n    get(name: string): string | null;\r\n  };\r\n  cookies: {\r\n    get(name: string): { value: string } | undefined;\r\n  };\r\n  nextUrl: {\r\n    pathname: string;\r\n    searchParams: URLSearchParams;\r\n  };\r\n}\r\n\r\n/**\r\n * NextRequest type - Next.js가 있으면 실제 타입, 없으면 기본 인터페이스\r\n * \r\n * Next.js가 optional peerDependency이므로, 타입 레벨에서만 처리합니다.\r\n * 실제 Next.js 프로젝트에서는 Next.js의 NextRequest 타입이 자동으로 사용됩니다.\r\n */\r\ntype NextRequest = BaseNextRequest;\r\n\r\n/**\r\n * Base interface for NextResponse (when Next.js is not available)\r\n */\r\ninterface BaseNextResponse {\r\n  headers: Headers;\r\n  next?(): BaseNextResponse;\r\n  redirect?(url: string): BaseNextResponse;\r\n}\r\n\r\n/**\r\n * NextResponse factory function\r\n * Next.js가 설치되어 있으면 실제 NextResponse를 사용하고, 없으면 폴백 구현을 사용합니다.\r\n */\r\nlet NextResponseFactory: {\r\n  next(): BaseNextResponse;\r\n  redirect(url: string): BaseNextResponse;\r\n};\r\n\r\ntry {\r\n  // Next.js가 설치되어 있으면 실제 NextResponse 사용\r\n  const nextServer = require('next/server');\r\n  NextResponseFactory = nextServer.NextResponse;\r\n} catch {\r\n  // Next.js가 없으면 폴백 구현\r\n  // Fallback implementation if Next.js is not available\r\n  NextResponseFactory = {\r\n    next: () => ({\r\n      headers: new Headers(),\r\n    } as BaseNextResponse),\r\n    redirect: (url: string) => ({\r\n      headers: new Headers(),\r\n    } as BaseNextResponse),\r\n  };\r\n}\r\n\r\n/**\r\n * i18n middleware configuration\r\n */\r\nexport interface I18nMiddlewareConfig {\r\n  /**\r\n   * Default language\r\n   */\r\n  defaultLanguage: string;\r\n  \r\n  /**\r\n   * Supported languages\r\n   */\r\n  supportedLanguages: string[];\r\n  \r\n  /**\r\n   * Language detection strategy\r\n   */\r\n  detectionStrategy?: 'header' | 'cookie' | 'path' | 'query';\r\n}\r\n\r\n/**\r\n * Create i18n middleware for Next.js\r\n * \r\n * **⚠️ Edge Runtime Note**: This middleware runs on Edge Runtime.\r\n * Make sure your middleware.ts file exports the runtime config:\r\n * \r\n * ```ts\r\n * export const runtime = 'edge';\r\n * ```\r\n * \r\n * @example\r\n * ```ts\r\n * // middleware.ts\r\n * import { createI18nMiddleware } from '@hua-labs/hua/framework';\r\n * \r\n * // Edge Runtime 명시 (Vercel 자동 감지 방지)\r\n * export const runtime = 'edge';\r\n * \r\n * export default createI18nMiddleware({\r\n *   defaultLanguage: 'ko',\r\n *   supportedLanguages: ['ko', 'en'],\r\n * });\r\n * ```\r\n * \r\n * **Alternative**: If you don't want to use Edge Runtime, you can handle\r\n * language detection in your API routes or client components instead.\r\n */\r\nexport function createI18nMiddleware(config: I18nMiddlewareConfig) {\r\n  return function i18nMiddleware(request: NextRequest) {\r\n    const { defaultLanguage, supportedLanguages, detectionStrategy = 'header' } = config;\r\n    \r\n    // Get language from various sources\r\n    let language = defaultLanguage;\r\n    \r\n    if (detectionStrategy === 'header') {\r\n      const acceptLanguage = request.headers.get('accept-language');\r\n      if (acceptLanguage) {\r\n        // Simple language detection from Accept-Language header\r\n        const preferredLang = acceptLanguage.split(',')[0].split('-')[0].toLowerCase();\r\n        if (supportedLanguages.includes(preferredLang)) {\r\n          language = preferredLang;\r\n        }\r\n      }\r\n    } else if (detectionStrategy === 'cookie') {\r\n      const cookieLang = request.cookies.get('language')?.value;\r\n      if (cookieLang && supportedLanguages.includes(cookieLang)) {\r\n        language = cookieLang;\r\n      }\r\n    } else if (detectionStrategy === 'path') {\r\n      const pathLang = request.nextUrl.pathname.split('/')[1];\r\n      if (pathLang && supportedLanguages.includes(pathLang)) {\r\n        language = pathLang;\r\n      }\r\n    } else if (detectionStrategy === 'query') {\r\n      const queryLang = request.nextUrl.searchParams.get('lang');\r\n      if (queryLang && supportedLanguages.includes(queryLang)) {\r\n        language = queryLang;\r\n      }\r\n    }\r\n    \r\n    // Add language to request headers for use in components\r\n    const response = NextResponseFactory.next();\r\n    response.headers.set('x-language', language);\r\n    \r\n    return response;\r\n  };\r\n}\r\n"]}