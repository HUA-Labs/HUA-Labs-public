# 작업 계획 및 우선순위 (2025-01-XX)

> 현재 상태를 기반으로 한 다음 단계 작업 계획

## 📋 현재 완료된 작업

### ✅ 완료
1. **Next.js 16 업그레이드**
   - Next.js 15.4.3 → 16.0.4
   - 빌드 스크립트에 `--webpack` 플래그 추가
   - 서버/클라이언트 컴포넌트 분리

2. **Tailwind CSS 4.0 마이그레이션**
   - 모든 앱의 Tailwind CSS v4로 업그레이드
   - `@tailwindcss/postcss` 패키지 설치
   - PostCSS 설정 업데이트
   - CSS 파일 `@import` 방식으로 변경

3. **UI 패키지 개선 (진행 중)**
   - `dangerouslySetInnerHTML` 제거 완료
   - Toast 애니메이션 CSS를 별도 파일로 분리
   - 서버/클라이언트 컴포넌트 분리 확인

4. **빌드 테스트**
   - `sum-api`: ✅ 성공
   - `sum-chat`: ✅ 성공
   - `sum-diary`: ⚠️ 타입 에러 (기존 코드 문제)

---

## 🎯 다음 작업 순서

### Phase 1: 빌드 안정화 및 검증 (우선순위: 🔴 최우선)

**목표**: 모든 앱이 정상적으로 빌드되고 실행되는지 확인

#### 1.1 나머지 앱 빌드 테스트
- [ ] `i18n-test` 빌드 테스트
- [ ] `hua-motion` 빌드 테스트
- [ ] 빌드 실패 시 원인 분석 및 수정

**예상 시간**: 0.5-1일

#### 1.2 타입 에러 수정 (선택사항)
- [ ] `sum-diary`: `nickname_hash` 속성 추가
- [ ] `i18n-test`: Window 타입 확장
- [ ] `hua-motion`: 빌드 에러 수정

**예상 시간**: 1-2일 (필요 시)

#### 1.3 개발 서버 실행 테스트
- [ ] 각 앱의 `pnpm dev` 실행 확인
- [ ] NextAuth 로그인 테스트
- [ ] API Routes 동작 확인

**예상 시간**: 0.5일

---

### Phase 2: UI 패키지 개선 완료 (우선순위: 🔴 최우선)

**목표**: UI 패키지를 프로덕션 배포 가능한 상태로 만들기

#### 2.1 빌드 시스템 개선 (이미 완료됨)
- [x] tsup 도입 및 설정
- [x] ESM/CJS 번들 생성
- [x] 타입 정의 파일 생성

#### 2.2 의존성 정리
- [ ] `react`, `react-dom`를 peerDependencies로만 이동 확인
- [ ] devDependencies 분리 확인
- [ ] package.json 최종 검증

**예상 시간**: 0.5일

#### 2.3 테스트 구축 (이미 일부 완료)
- [x] Vitest 설정
- [x] 기본 컴포넌트 테스트 (Button, Input, Card, Badge, Action, Panel, Toast)
- [ ] 추가 컴포넌트 테스트 작성
- [ ] CI/CD 통합 (선택사항)

**예상 시간**: 2-3일

#### 2.4 Storybook 완성 (이미 도입됨)
- [x] Storybook 설정
- [ ] 핵심 컴포넌트 스토리 작성
- [ ] 대시보드 위젯 스토리 작성

**예상 시간**: 3-5일

---

### Phase 3: 리팩토링 및 최적화 (우선순위: 🟡 중요)

**목표**: 코드 품질 향상 및 성능 최적화

#### 3.1 서버/클라이언트 컴포넌트 분리 개선
- [ ] 서버 컴포넌트로 사용 가능한 컴포넌트 식별
- [ ] `@hua-labs/ui/client` export 경로 추가 (선택사항)
- [ ] 문서화

**예상 시간**: 2-3일

#### 3.2 접근성 개선
- [ ] TransactionsTable 키보드 네비게이션 확인 (이미 개선됨)
- [ ] 모든 인터랙티브 컴포넌트 ARIA 속성 검증
- [ ] 스크린 리더 테스트

**예상 시간**: 2-3일

#### 3.3 성능 최적화
- [ ] 번들 크기 분석 (이미 스크립트 있음)
- [ ] 트리 쉐이킹 검증
- [ ] 메모이제이션 최적화

**예상 시간**: 2-3일

---

### Phase 4: 기능 완성 (우선순위: 🟢 보통)

**목표**: 미완성 기능 구현

#### 4.1 고급 모션 기능
- [ ] Action 컴포넌트의 ripple 효과 구현
- [ ] Haptic 피드백 구현 (모바일)
- [ ] Sound 효과 (선택적)

**예상 시간**: 2-3일

#### 4.2 테마 변수 마이그레이션 (선택사항)
- [ ] CSS 변수를 `@theme` 블록으로 이동
- [ ] OKLCH 색상 공간 변환 (선택사항)

**예상 시간**: 1-2일

---

## 📅 권장 작업 순서

### 즉시 진행 (이번 주)
1. ✅ **나머지 앱 빌드 테스트** (0.5일)
   - `i18n-test`, `hua-motion` 빌드 확인
   - 실패 시 원인 분석

2. ✅ **의존성 정리** (0.5일)
   - package.json 최종 검증
   - peerDependencies 확인

3. ✅ **개발 서버 실행 테스트** (0.5일)
   - 각 앱의 `pnpm dev` 확인
   - 기본 기능 동작 확인

### 다음 주
4. ✅ **추가 컴포넌트 테스트 작성** (2-3일)
   - 대시보드 위젯 테스트
   - 피드백 컴포넌트 테스트

5. ✅ **Storybook 스토리 작성** (3-5일)
   - 핵심 컴포넌트 스토리
   - 상태별 예시 추가

### 이후 (선택사항)
6. ✅ **서버/클라이언트 컴포넌트 분리 개선** (2-3일)
7. ✅ **접근성 개선** (2-3일)
8. ✅ **성능 최적화** (2-3일)
9. ✅ **고급 모션 기능** (2-3일)

---

## 🎯 단기 목표 (이번 주)

1. **모든 앱 빌드 성공 확인**
   - `i18n-test`, `hua-motion` 빌드 테스트
   - 실패 시 수정

2. **UI 패키지 의존성 정리**
   - package.json 최종 검증
   - 빌드 시스템 안정화

3. **기본 기능 동작 확인**
   - 개발 서버 실행
   - 주요 기능 테스트

---

## 📊 진행 상황 추적

### 완료된 작업 ✅
- [x] Next.js 16 업그레이드
- [x] Tailwind CSS 4.0 마이그레이션
- [x] UI 패키지 `dangerouslySetInnerHTML` 제거
- [x] Toast CSS 분리
- [x] tsup 빌드 시스템 도입
- [x] Vitest 테스트 설정
- [x] 기본 컴포넌트 테스트 작성
- [x] Storybook 도입
- [x] `sum-api`, `sum-chat` 빌드 성공

### 진행 중 🟡
- [ ] 나머지 앱 빌드 테스트
- [ ] 의존성 정리
- [ ] Storybook 스토리 작성

### 대기 중 ⏳
- [ ] 서버/클라이언트 컴포넌트 분리 개선
- [ ] 접근성 개선
- [ ] 성능 최적화
- [ ] 고급 모션 기능

---

## 🔗 관련 문서

- [NEXTJS_16_TAILWIND_4_SUMMARY.md](./NEXTJS_16_TAILWIND_4_SUMMARY.md) - 업그레이드 완료 요약
- [TAILWIND_CSS_4_MIGRATION.md](./TAILWIND_CSS_4_MIGRATION.md) - Tailwind CSS 4 마이그레이션
- [packages/hua-ui/docs/IMPROVEMENT_PLAN_2025.md](../packages/hua-ui/docs/IMPROVEMENT_PLAN_2025.md) - UI 패키지 개선 계획
- [DEPENDENCY_MANAGEMENT.md](./DEPENDENCY_MANAGEMENT.md) - 의존성 관리 전략

---

## 💡 참고사항

1. **우선순위 기준**
   - 🔴 최우선: 빌드 안정화 및 프로덕션 배포 준비
   - 🟡 중요: 개발자 경험 향상
   - 🟢 보통: 기능 완성 및 최적화

2. **작업 순서 원칙**
   - 빌드 안정화 → 테스트 구축 → 문서화 → 최적화
   - 각 Phase는 독립적으로 배포 가능하도록 설계

3. **타입 에러 처리**
   - 기존 코드 문제는 선택사항으로 처리
   - UI 패키지와 무관한 에러는 우선순위 낮음

---

**작성일**: 2025-01-XX  
**다음 리뷰**: Phase 1 완료 후

