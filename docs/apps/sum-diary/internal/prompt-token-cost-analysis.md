# 프롬프트 토큰 수 증가에 따른 비용 분석

> 작성일: 2025-12-06  
> 목적: HUA System Prompt v4 통합으로 인한 토큰 수 증가 및 비용 영향 분석  
> 환율 기준: 1 USD = 1,470 KRW

---

## 개요

HUA System Prompt v4 통합으로 인해 프롬프트 토큰 수가 증가했습니다. 이 문서는 토큰 증가량과 비용 영향을 분석합니다.

---

## 프롬프트 토큰 수 변화

### 기존 (v3 이전)
- **프롬프트 토큰**: 550 토큰
- **문자 수**: 약 1,375자 (한국어 기준 1자 = 0.4 토큰)

### 신규 (v4)
- **프롬프트 토큰**: 약 1,200 토큰
- **문자 수**: 약 3,000자 (한국어 기준 1자 = 0.4 토큰)
- **증가량**: **+650 토큰** (약 118% 증가)

---

## 1차 분석 비용 영향 (GPT-5-mini)

### 가격 정보
- **입력**: $0.00025 per 1K tokens
- **출력**: $0.002 per 1K tokens

### 기존 시나리오 (총 5,000~6,000 토큰 기준)

**5,000 토큰 기준:**
- 입력: 4,400 토큰 (프롬프트 550 + 일기 3,850)
- 출력: 600 토큰
- 총합: 5,000 토큰
- **비용 (USD)**: $0.0011 + $0.0012 = **$0.0023**
- **비용 (KRW)**: **₩3.38**

**6,000 토큰 기준:**
- 입력: 5,400 토큰 (프롬프트 550 + 일기 4,850)
- 출력: 600 토큰
- 총합: 6,000 토큰
- **비용 (USD)**: $0.00135 + $0.0012 = **$0.00255**
- **비용 (KRW)**: **₩3.75**

### 신규 시나리오

**5,650 토큰 기준:**
- 입력: 5,050 토큰 (프롬프트 1,200 + 일기 3,850)
- 출력: 600 토큰
- 총합: 5,650 토큰
- **비용 (USD)**: $0.0012625 + $0.0012 = **$0.0024625**
- **비용 (KRW)**: **₩3.62**

**6,650 토큰 기준:**
- 입력: 6,050 토큰 (프롬프트 1,200 + 일기 4,850)
- 출력: 600 토큰
- 총합: 6,650 토큰
- **비용 (USD)**: $0.0015125 + $0.0012 = **$0.0027125**
- **비용 (KRW)**: **₩3.99**

### 비용 증가 분석

**5,000 토큰 → 5,650 토큰:**
- 토큰 증가: **+650 토큰**
- 비용 증가 (USD): $0.0001625
- **비용 증가 (KRW): ₩0.24**
- 증가율: **7.1%**

**6,000 토큰 → 6,650 토큰:**
- 토큰 증가: **+650 토큰**
- 비용 증가 (USD): $0.0001625
- **비용 증가 (KRW): ₩0.24**
- 증가율: **6.4%**

---

## 월간 비용 영향 추정

### 시나리오 1: 무료 사용자 (월 50회 분석)
- 기존: ₩3.38 × 50 = **₩169**
- 신규: ₩3.62 × 50 = **₩181**
- **증가: ₩12/월**

### 시나리오 2: 프리미엄 사용자 (월 500회 분석)
- 기존: ₩3.38 × 500 = **₩1,690**
- 신규: ₩3.62 × 500 = **₩1,810**
- **증가: ₩120/월**

### 시나리오 3: 최대 사용량 (월 500회, 평균 6,000 토큰)
- 기존: ₩3.75 × 500 = **₩1,875**
- 신규: ₩3.99 × 500 = **₩1,995**
- **증가: ₩120/월**

---

## 결론

### 주요 발견사항

1. **프롬프트 토큰 증가**: 550 → 1,200 토큰 (+650 토큰, 118% 증가)
2. **1회 분석 비용 증가**: 약 **₩0.24** (USD $0.0001625)
3. **비용 증가율**: 약 **6~7%**
4. **월간 영향**: 무료 사용자 +₩12, 프리미엄 사용자 +₩120

### 비즈니스 영향

- **무료 사용자**: 월 ₩12 증가는 미미한 수준
- **프리미엄 사용자**: 월 ₩120 증가는 수용 가능한 범위
- **전체 비용**: 프롬프트 품질 향상 대비 비용 증가는 합리적

### 권장사항

1. **현재 프롬프트 유지**: 품질 향상 대비 비용 증가는 수용 가능
2. **실제 사용량 모니터링**: 실제 토큰 사용량 추적하여 정확한 비용 계산
3. **향후 최적화**: 필요 시 프롬프트 압축 또는 구조 개선 검토

---

## 참고사항

- 토큰 수 계산은 한국어 기준 (1자 = 0.4 토큰)으로 추정
- 실제 OpenAI API의 토큰 수는 다를 수 있음
- 일기 내용 길이에 따라 실제 비용은 변동될 수 있음
- 출력 토큰 수는 일정하다고 가정 (600 토큰)

---

## 관련 문서

- [AI_PRICING_SETUP.md](./AI_PRICING_SETUP.md) - AI 모델 가격 설정 가이드
- [prompt-templates.ts](../app/lib/prompt-templates.ts) - 프롬프트 템플릿 소스 코드

