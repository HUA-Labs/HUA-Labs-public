# UI ν¨ν‚¤μ§€ μ„λ²„/ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈ λ¶„λ¦¬ κ°μ„  κ³„ν

## π“‹ κ°μ”

Next.js 16 App Routerμ—μ„ λ°κ²¬λ UI ν¨ν‚¤μ§€μ μ„λ²„/ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈ λ¶„λ¦¬ λ¬Έμ λ¥Ό ν•΄κ²°ν•κΈ° μ„ν• κ°μ„  κ³„νμ…λ‹λ‹¤.

**μ‘μ„±μΌ:** 2025-01-XX  
**κ΄€λ ¨ μ΄μ:** Next.js 16 μ—…κ·Έλ μ΄λ“ μ¤‘ λ°κ²¬  
**λ€μƒ λΈλμΉ:** `feature/dashboard-ui-widgets` (μμ •)

---

## π” ν„μ¬ λ¬Έμ μ 

### 1. λ¨λ“  μ»΄ν¬λ„νΈκ°€ `"use client"`λ΅ λ§ν¬λ¨

**ν„μ¬ μƒνƒ:**
- UI ν¨ν‚¤μ§€μ κ±°μ λ¨λ“  μ»΄ν¬λ„νΈκ°€ `"use client"` μ§€μ‹μ–΄λ¥Ό μ‚¬μ©
- μ„λ²„ μ»΄ν¬λ„νΈμ—μ„ μ‚¬μ©ν•  μ μλ” μ»΄ν¬λ„νΈκ°€ κ±°μ μ—†μ
- Next.js App Routerμ μ„λ²„ μ»΄ν¬λ„νΈ μ΄μ μ„ ν™μ©ν•μ§€ λ»ν•¨

**μν–¥:**
- λ¶ν•„μ”ν• ν΄λΌμ΄μ–ΈνΈ λ²λ“¤ ν¬κΈ° μ¦κ°€
- μ„λ²„ μ‚¬μ΄λ“ λ λ”λ§ μµμ ν™” κΈ°ν μƒμ‹¤
- μ„λ²„ μ»΄ν¬λ„νΈμ—μ„ μ§μ ‘ μ‚¬μ© λ¶κ°€

### 2. ν΄λΌμ΄μ–ΈνΈ/μ„λ²„ κµ¬λ¶„μ΄ λ¶λ…ν™•

**ν„μ¬ μƒνƒ:**
- Contextλ¥Ό μ‚¬μ©ν•λ” μ»΄ν¬λ„νΈ(`Toast`, `ThemeProvider`)μ™€ λ‹¨μ UI μ»΄ν¬λ„νΈκ°€ λ™μΌν•κ² exportλ¨
- μ‚¬μ©μκ°€ μ„λ²„ μ»΄ν¬λ„νΈμ—μ„ μ‚¬μ© κ°€λ¥ν•μ§€ μ•κΈ° μ–΄λ ¤μ›€
- λΉλ“ μ‹μ μ—λ§ μ—λ¬κ°€ λ°μƒν•μ—¬ κ°λ° κ²½ν—μ΄ μΆ‹μ§€ μ•μ

**μν–¥:**
- κ°λ°μκ°€ μ‹¤μλ΅ μ„λ²„ μ»΄ν¬λ„νΈμ—μ„ ν΄λΌμ΄μ–ΈνΈ μ „μ© μ»΄ν¬λ„νΈλ¥Ό μ‚¬μ©
- μ—λ¬ λ°μƒ μ‹μ μ΄ λ¦μ–΄ λ””λ²„κΉ…μ΄ μ–΄λ ¤μ›€

### 3. μ„μ‹ ν•΄κ²°μ±…μ ν•κ³„

**ν„μ¬ ν•΄κ²°μ±…:**
- κ° μ•±μ—μ„ ν΄λΌμ΄μ–ΈνΈ λνΌ μ»΄ν¬λ„νΈ μƒμ„± (`ClientComponents.tsx`)
- `Providers` μ»΄ν¬λ„νΈ λ‚΄λ¶€μ— ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈ ν¬ν•¨

**ν•κ³„:**
- κ° μ•±λ§λ‹¤ μ¤‘λ³µ μ½”λ“ λ°μƒ
- ν¨ν‚¤μ§€ λ λ²¨μ—μ„ ν•΄κ²°λμ§€ μ•μ
- μ μ§€λ³΄μ λ¶€λ‹΄ μ¦κ°€

---

## π― κ°μ„  λ©ν‘

1. **λ…ν™•ν• μ„λ²„/ν΄λΌμ΄μ–ΈνΈ λ¶„λ¦¬**
   - μ„λ²„ μ»΄ν¬λ„νΈμ—μ„ μ‚¬μ© κ°€λ¥ν• μ»΄ν¬λ„νΈλ” `"use client"` μ κ±°
   - ν΄λΌμ΄μ–ΈνΈ μ „μ© μ»΄ν¬λ„νΈλ” λ³„λ„ export κ²½λ΅ μ κ³µ

2. **κ°λ°μ κ²½ν— κ°μ„ **
   - νƒ€μ… λ λ²¨μ—μ„ μ„λ²„/ν΄λΌμ΄μ–ΈνΈ κµ¬λ¶„
   - λ…ν™•ν• import κ²½λ΅ μ κ³µ
   - λ¬Έμ„ν™” κ°•ν™”

3. **λ²λ“¤ ν¬κΈ° μµμ ν™”**
   - μ„λ²„ μ»΄ν¬λ„νΈμ—μ„ μ‚¬μ© μ‹ λ¶ν•„μ”ν• ν΄λΌμ΄μ–ΈνΈ μ½”λ“ μ κ±°
   - Tree-shaking μµμ ν™”

---

## π“ κ°μ„  λ°©μ•

### μµμ… 1: μ„λ²„/ν΄λΌμ΄μ–ΈνΈ λ¶„λ¦¬ (κ¶μ¥) β­

**κµ¬μ΅°:**
```typescript
// packages/hua-ui/src/index.ts (μ„λ²„ μ»΄ν¬λ„νΈμ©)
export { Button } from './components/Button'; // "use client" μ κ±°
export { Card } from './components/Card';
export { Input } from './components/Input';
// ... μ„λ²„μ—μ„λ„ μ‚¬μ© κ°€λ¥ν• μ»΄ν¬λ„νΈλ“¤

// packages/hua-ui/src/client.ts (ν΄λΌμ΄μ–ΈνΈ μ „μ©)
export { ToastProvider, useToast } from './components/Toast';
export { ThemeProvider } from './components/ThemeProvider';
export { ScrollToTop } from './components/ScrollToTop';
// ... Contextλ‚ hooksλ¥Ό μ‚¬μ©ν•λ” μ»΄ν¬λ„νΈλ“¤
```

**μ‚¬μ©λ²•:**
```tsx
// μ„λ²„ μ»΄ν¬λ„νΈμ—μ„
import { Button, Card } from '@hua-labs/ui';

// ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈμ—μ„
import { ToastProvider, ScrollToTop } from '@hua-labs/ui/client';
```

**μ¥μ :**
- β… λ…ν™•ν• κµ¬λ¶„
- β… νƒ€μ… μ•μ •μ„±
- β… μ„λ²„ μ»΄ν¬λ„νΈ μ΄μ  ν™μ©
- β… κ°λ°μ κ²½ν— κ°μ„ 

**λ‹¨μ :**
- β οΈ Breaking change (import κ²½λ΅ λ³€κ²½ ν•„μ”)
- β οΈ λ§μ΄κ·Έλ μ΄μ… μ‘μ—… ν•„μ”

### μµμ… 2: νƒ€μ… κΈ°λ° κ°€μ΄λ“

ν΄λΌμ΄μ–ΈνΈ μ „μ© μ»΄ν¬λ„νΈμ— νƒ€μ… ννΈ μ¶”κ°€:
```typescript
/**
 * @clientOnly - This component requires client-side rendering
 * Use in a Client Component with "use client" directive
 */
export const ToastProvider = ...
```

**μ¥μ :**
- β… Breaking change μ—†μ
- β… λ¬Έμ„ν™” κ°μ„ 

**λ‹¨μ :**
- β οΈ λ°νƒ€μ„ μ—λ¬λ” μ—¬μ „ν λ°μƒ
- β οΈ νƒ€μ… λ λ²¨ λ³΄νΈ λ¶€μ΅±

### μµμ… 3: Wrapper ν¨ν„΄

ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈλ¥Ό μ„ν• μ„λ²„ μ»΄ν¬λ„νΈ λνΌ μ κ³µ:
```typescript
// μ„λ²„ μ»΄ν¬λ„νΈμ© λνΌ
export function ToastProviderWrapper({ children }) {
  return (
    <ClientToastProvider>
      {children}
    </ClientToastProvider>
  );
}
```

**μ¥μ :**
- β… Breaking change μ—†μ
- β… μ„λ²„ μ»΄ν¬λ„νΈμ—μ„ μ‚¬μ© κ°€λ¥

**λ‹¨μ :**
- β οΈ λνΌ μ»΄ν¬λ„νΈ μ¶”κ°€ ν•„μ”
- β οΈ λ³µμ΅λ„ μ¦κ°€

---

## π€ μ‹¤ν–‰ κ³„ν

### Phase 1: λ¶„μ„ λ° λ¶„λ¥ (1μΌ)

1. **μ»΄ν¬λ„νΈ λ¶„λ¥**
   - μ„λ²„ μ»΄ν¬λ„νΈλ΅ μ‚¬μ© κ°€λ¥ν• μ»΄ν¬λ„νΈ μ‹λ³„
   - ν΄λΌμ΄μ–ΈνΈ μ „μ© μ»΄ν¬λ„νΈ μ‹λ³„
   - Context/hooks μ‚¬μ© μ—¬λ¶€ ν™•μΈ

2. **μμ΅΄μ„± λ¶„μ„**
   - κ° μ»΄ν¬λ„νΈμ μμ΅΄μ„± ν™•μΈ
   - ν΄λΌμ΄μ–ΈνΈ μ „μ© κΈ°λ¥ μ‚¬μ© μ—¬λ¶€ ν™•μΈ

### Phase 2: κµ¬μ΅° κ°μ„  (2-3μΌ)

1. **μ„λ²„ μ»΄ν¬λ„νΈ μµμ ν™”**
   - λ¶ν•„μ”ν• `"use client"` μ κ±°
   - μ„λ²„μ—μ„ μ‚¬μ© κ°€λ¥ν• μ»΄ν¬λ„νΈ κ²€μ¦

2. **ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈ λ¶„λ¦¬**
   - `src/client.ts` νμΌ μƒμ„±
   - ν΄λΌμ΄μ–ΈνΈ μ „μ© μ»΄ν¬λ„νΈ export

3. **package.json exports μ—…λ°μ΄νΈ**
   - `./client` export κ²½λ΅ μ¶”κ°€
   - νƒ€μ… μ •μ μ—…λ°μ΄νΈ

### Phase 3: ν…μ¤νΈ λ° λ¬Έμ„ν™” (1-2μΌ)

1. **ν…μ¤νΈ μ‘μ„±**
   - μ„λ²„ μ»΄ν¬λ„νΈ μ‚¬μ© ν…μ¤νΈ
   - ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈ μ‚¬μ© ν…μ¤νΈ
   - λΉλ“ ν…μ¤νΈ

2. **λ¬Έμ„ν™”**
   - μ‚¬μ© κ°€μ΄λ“ μ‘μ„±
   - λ§μ΄κ·Έλ μ΄μ… κ°€μ΄λ“ μ‘μ„±
   - μμ  μ½”λ“ μ¶”κ°€

### Phase 4: λ§μ΄κ·Έλ μ΄μ… (2-3μΌ)

1. **μ•±λ³„ λ§μ΄κ·Έλ μ΄μ…**
   - `sum-api` λ§μ΄κ·Έλ μ΄μ…
   - `sum-chat` λ§μ΄κ·Έλ μ΄μ…
   - `sum-diary` λ§μ΄κ·Έλ μ΄μ…

2. **κ²€μ¦**
   - λΉλ“ ν…μ¤νΈ
   - λ°νƒ€μ„ ν…μ¤νΈ
   - μ„±λ¥ μΈ΅μ •

---

## π“ μμƒ μ‘μ—…λ‰

| Phase | μ‘μ—… | μμƒ μ‹κ°„ |
|-------|------|----------|
| Phase 1 | λ¶„μ„ λ° λ¶„λ¥ | 1μΌ |
| Phase 2 | κµ¬μ΅° κ°μ„  | 2-3μΌ |
| Phase 3 | ν…μ¤νΈ λ° λ¬Έμ„ν™” | 1-2μΌ |
| Phase 4 | λ§μ΄κ·Έλ μ΄μ… | 2-3μΌ |
| **μ΄κ³„** | | **6-9μΌ** |

---

## β… μ„±κ³µ μ§€ν‘

1. **κΈ°μ μ  μ§€ν‘**
   - β… μ„λ²„ μ»΄ν¬λ„νΈμ—μ„ μ‚¬μ© κ°€λ¥ν• μ»΄ν¬λ„νΈ λΉ„μ¨ 70% μ΄μƒ
   - β… ν΄λΌμ΄μ–ΈνΈ λ²λ“¤ ν¬κΈ° 10% μ΄μƒ κ°μ†
   - β… λΉλ“ μ—λ¬ 0κ°

2. **κ°λ°μ κ²½ν—**
   - β… νƒ€μ… λ λ²¨μ—μ„ μ„λ²„/ν΄λΌμ΄μ–ΈνΈ κµ¬λ¶„ κ°€λ¥
   - β… λ…ν™•ν• import κ²½λ΅ μ κ³µ
   - β… λ¬Έμ„ν™” μ™„λ£

---

## π”— κ΄€λ ¨ λ¬Έμ„

- [IMPROVEMENT_PLAN_2025.md](./packages/hua-ui/docs/IMPROVEMENT_PLAN_2025.md) - UI ν¨ν‚¤μ§€ κ°μ„  κ³„ν
- [NEXTJS_16_VERIFICATION_GUIDE.md](./NEXTJS_16_VERIFICATION_GUIDE.md) - Next.js 16 κ²€μ¦ κ°€μ΄λ“

---

## π“ μ°Έκ³ μ‚¬ν•­

1. **Breaking Change κ³ λ ¤**
   - λ§μ΄κ·Έλ μ΄μ… κ°€μ΄λ“ μ κ³µ ν•„μ
   - λ²„μ „ μ—…κ·Έλ μ΄λ“ μ‹ μ£Όμμ‚¬ν•­ λ…μ‹

2. **ν•μ„ νΈν™μ„±**
   - κ°€λ¥ν• κ²½μ° κΈ°μ΅΄ import κ²½λ΅ μ μ§€
   - μ μ§„μ  λ§μ΄κ·Έλ μ΄μ… μ§€μ›

3. **ν…μ¤νΈ μ»¤λ²„λ¦¬μ§€**
   - μ„λ²„/ν΄λΌμ΄μ–ΈνΈ λ¶„λ¦¬ ν…μ¤νΈ μ¶”κ°€
   - CI/CD νμ΄ν”„λΌμΈμ— ν†µν•©

