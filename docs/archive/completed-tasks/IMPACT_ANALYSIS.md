# Motion 패키지 재편 영향도 분석

**작성일**: 2025-12-06  
**상태**: Phase 1 완료, Phase 2 준비

---

## 📋 목차

1. [현재 변경사항 요약](#현재-변경사항-요약)
2. [프로젝트별 영향도 분석](#프로젝트별-영향도-분석)
3. [다음 단계 계획](#다음-단계-계획)

---

## 현재 변경사항 요약

### 완료된 작업 ✅

1. **UI 패키지 의존성 변경**
   - `@hua-labs/motion` → `@hua-labs/motion-core`
   - 빌드 설정 업데이트 (`tsup.config.ts`)
   - 빌드 검증 완료 (ESM/CJS 성공)

2. **효과**
   - 번들 크기 최적화 (motion-core만 의존)
   - 명확한 의존성 구조
   - UI 패키지는 실제로 Motion을 사용하지 않으므로 영향 없음

---

## 프로젝트별 영향도 분석

### 1. `@hua-labs/ui` 패키지 ✅

**현재 상태**: 변경 완료

**변경사항**:
- 의존성: `@hua-labs/motion` → `@hua-labs/motion-core`
- 빌드 설정: external 설정 업데이트
- 실제 사용: Motion 훅을 사용하지 않음 (자체 구현)

**영향도**: ✅ **영향 없음**
- Motion을 실제로 사용하지 않음
- 빌드 성공 확인
- 번들 크기 최적화 달성

---

### 2. `apps/hua-motion` 앱 ⚠️

**현재 상태**: 통합 패키지 사용 중

**의존성**:
```json
{
  "@hua-labs/motion": "workspace:*",
  "@hua-labs/motion-advanced": "workspace:*",
  "@hua-labs/motion-core": "workspace:*"
}
```

**사용 현황**:
- 통합 패키지에서 Core 훅 import: `useFadeIn`, `useSlideUp`, `usePageMotions` 등
- 8개 파일에서 통합 패키지 사용 중

**영향도**: ⚠️ **통합 패키지 재구성 시 영향 있음**

**마이그레이션 필요**:
- `@hua-labs/motion` → `@hua-labs/motion-core` 또는 `@hua-labs/motion-advanced`
- 8개 파일의 import 경로 변경 필요

**우선순위**: 중간
- Motion 데모/플레이그라운드 앱이므로 마이그레이션 테스트에 적합
- 통합 패키지 재구성 후 마이그레이션 진행

---

### 3. `apps/sum-api` 앱 ⚠️

**현재 상태**: 통합 패키지 사용 중

**의존성**:
```json
{
  "@hua-labs/motion": "workspace:*"
}
```

**사용 현황**: 확인 필요

**영향도**: ⚠️ **통합 패키지 재구성 시 영향 가능**

**마이그레이션 필요**:
- 사용 현황 확인 후 결정
- 필요 시 `@hua-labs/motion-core` 또는 `@hua-labs/motion-advanced`로 변경

**우선순위**: 낮음
- 프로덕션 앱이므로 신중한 접근 필요
- 통합 패키지 하위 호환성 유지 시 영향 없음

---

### 4. `apps/sum-diary` 앱 ⚠️

**현재 상태**: 통합 패키지 사용 중

**의존성**:
```json
{
  "@hua-labs/motion": "workspace:*"
}
```

**사용 현황**: 확인 필요

**영향도**: ⚠️ **통합 패키지 재구성 시 영향 가능**

**마이그레이션 필요**:
- 사용 현황 확인 후 결정
- 필요 시 `@hua-labs/motion-core` 또는 `@hua-labs/motion-advanced`로 변경

**우선순위**: 낮음
- 프로덕션 앱이므로 신중한 접근 필요
- 통합 패키지 하위 호환성 유지 시 영향 없음

---

## 다음 단계 계획

### 즉시 실행 가능 (완료) ✅

1. ✅ UI 패키지 의존성 변경
2. ✅ 빌드 설정 업데이트
3. ✅ 빌드 검증

### 단기 작업 (1-2주)

#### 1. 통합 패키지 재구성 계획 수립
- [ ] Core + Advanced re-export 구조 설계
- [ ] 하위 호환성 보장 방법 결정
- [ ] 마이그레이션 전략 수립

#### 2. 영향도 상세 분석
- [ ] `apps/hua-motion` 사용 현황 상세 분석
- [ ] `apps/sum-api` 사용 현황 확인
- [ ] `apps/sum-diary` 사용 현황 확인
- [ ] 마이그레이션 우선순위 결정

#### 3. 통합 패키지 재구성 구현
- [ ] Core + Advanced re-export 구현
- [ ] 기존 export 구조 유지
- [ ] 하위 호환성 테스트

### 중기 작업 (2-4주)

#### 1. 하위 호환성 검증
- [ ] 기존 프로젝트 빌드 테스트
- [ ] 런타임 테스트
- [ ] 타입 호환성 확인

#### 2. 점진적 마이그레이션
- [ ] `apps/hua-motion` 마이그레이션 (테스트 앱)
- [ ] 마이그레이션 가이드 작성
- [ ] 다른 프로젝트 마이그레이션 계획

---

## 권장 접근 방법

### 현재 단계: 안정화 및 검증

1. **현재 변경사항 안정화** ✅
   - UI 패키지 변경 완료
   - 빌드 성공 확인
   - 번들 크기 최적화 달성

2. **통합 패키지 재구성 준비**
   - 영향도 분석 완료
   - 재구성 계획 수립 필요
   - 하위 호환성 보장 방법 결정

### 다음 단계: 통합 패키지 재구성

**전제 조건**:
- ✅ UI 패키지 변경 안정화 완료
- ⏳ 통합 패키지 재구성 계획 수립
- ⏳ 하위 호환성 보장 방법 결정

**실행 계획**:
1. Core + Advanced re-export 구조 구현
2. 하위 호환성 테스트
3. 기존 프로젝트 영향 최소화
4. 점진적 마이그레이션 지원

---

## 결론

### 현재 상태
- ✅ UI 패키지 변경 완료 및 안정화
- ✅ 목표 달성 (번들 크기 최적화, 명확한 의존성)
- ⏳ 통합 패키지 재구성 준비 중

### 다음 단계
1. 통합 패키지 재구성 계획 수립
2. 하위 호환성 보장 방법 결정
3. 점진적 마이그레이션 전략 수립

### 핵심 원칙
- **안정성 우선**: 현재 변경사항 안정화 완료
- **점진적 접근**: 통합 패키지 재구성은 별도 단계로 진행
- **하위 호환성**: 기존 코드 영향 최소화

---

**작성자**: Auto (AI Assistant)  
**최종 업데이트**: 2025-12-06

