# HUA Labs 모노레포 전환 제안서

## 📋 현재 상황 분석

### 🏗️ 현재 프로젝트 구조

| 프로젝트 | 위치 | 상태 | 기술 스택 | 목적 |
|---------|------|------|-----------|------|
| **hua-api** | `G:\HUA\hua-api` | 🟢 사이트 베타 서비스 | Next.js + Supabase | 사용자 인증, 크레딧, API 키 관리 |
| **hua-sdk-lite-v2** | `G:\HUA\sdk\hua-sdk-lite-v2` | 🟢 2.2.1 배포됨 | TypeScript | 감정 인식 AI 챗봇 SDK |
| **i18n-sdk** | `G:\HUA\sdk\i18n-sdk` | 🟡 1.3.0 개발 중 | TypeScript + React | 다국어 지원 SDK |
| **hua-demo** | `G:\HUA\hua-demo` | 🟢 깃 배포됨 | React + Vite | API 테스트 데모 |
| **my-chat** | `G:\HUA\my-chat` | 🟡 클로즈 베타 | Next.js + Tailwind | 감응 챗 인터페이스 |
| **my-app** | `G:\HUA\my-app` | 🟡 개발 예정 | Next.js | 일기앱 |
| **hua-labs** | `G:\HUA\hua-labs` | 🟡 개발 중 | Next.js | 현재 작업 중인 프로젝트 |

### 🔗 의존성 관계

```
my-chat → hua-api → hua-sdk-lite-v2
my-app → hua-api → hua-sdk-lite-v2
hua-demo → hua-api → hua-sdk-lite-v2
i18n-sdk → (독립적, 다른 SDK들과 통합 가능)
```

## 🚨 현재 문제점

### 📉 개발 효율성 문제
- **🔁 코드 중복**: utils, types, config 등 각 프로젝트에 중복 존재
- **🧱 개발 리듬 단절**: 프로젝트 간 이동 시 context 전환 비용
- **❌ IDE 지원 제한**: 타입 자동완성, 참조, 테스트 불가능
- **📦 의존성 관리 복잡**: 패키지 버전 동기화 어려움

### 🚫 운영 관리 문제
- **🔁 릴리즈 불일치**: SDK 업데이트 → API 반영 지연
- **📦 CI/CD 비효율**: 여러 repo 관리로 자동화 어려움
- **📚 문서 분산**: 각 프로젝트별 문서 관리 복잡
- **🔄 배포 복잡성**: 서비스 간 연동 배포 어려움

### 🏗️ 아키텍처 문제
- **"반쯤 모노레포" 상태**: 폴더는 분리되어 있지만 연결 안 됨
- **모노레포 흉내를 낸 멀티레포**: 실제 모노레포의 장점 없음
- **공통 라이브러리 부재**: 재사용 가능한 코드 분리 안 됨

## 💡 해결 방안: 완전한 모노레포 전환

### 🎯 제안 구조: `hua-platform`

```
hua-platform/
├── apps/                    # 애플리케이션들
│   ├── my-chat/           # 감정 대화 앱 (클로즈 베타)
│   ├── my-app/          # 감정 일기 앱 (개발 예정)
│   ├── api/                # SUM API 서버 (베타 서비스)
│   ├── demo/               # API 테스트 데모
│   ├── website/            # 공식 사이트
│   └── docs/               # 문서 사이트
├── packages/               # 공통 패키지들
│   ├── hua-sdk-lite/       # 기존 SDK Lite
│   ├── hua-i18n-core/      # i18n 기본 기능
│   ├── hua-i18n-plugins/   # i18n 플러그인 시스템
│   ├── hua-i18n-ai/        # i18n AI 번역
│   ├── hua-i18n-generator/ # i18n JSON 생성기
│   ├── hua-i18n-monitor/   # i18n 성능 모니터링
│   ├── hua-i18n-cli/       # i18n CLI 도구
│   ├── hua-utils/          # 공통 유틸리티
│   ├── hua-types/          # 공통 타입 정의
│   └── hua-config/         # 공통 설정
├── tools/                  # 개발 도구
│   ├── cli/                # CLI 도구
│   ├── build/              # 빌드 스크립트
│   └── scripts/            # 유틸리티 스크립트
├── .turbo/                 # Turborepo 캐시
├── turbo.json              # 빌드 설정
├── tsconfig.base.json      # 공통 TypeScript 설정
└── package.json            # 루트 패키지
```

### 🛠️ 기술 스택

- **모노레포 도구**: Turborepo + pnpm
- **빌드 시스템**: TypeScript + Vite/Webpack
- **테스트**: Jest + Playwright
- **CI/CD**: GitHub Actions + Vercel
- **문서**: Next.js + MDX
- **배포**: npm (패키지) + Vercel (앱)

## 🚀 모노레포 전환 효과

### ✅ 개발 효율성 향상
- **단일 의존성 관리**: pnpm workspace로 통합 관리
- **코드 재사용**: `@hua-labs/utils`, `@hua-labs/types` 등 공통화
- **개발 속도**: IDE에서 바로 이동 & 수정 테스트 가능
- **타입 안전성**: 전체 프로젝트 통합 타입 시스템

### ✅ 운영 효율성 향상
- **버전 동기화**: changesets로 multi-package 배포
- **CI/CD 자동화**: 단일 파이프라인으로 모든 프로젝트 관리
- **문서 통합**: 공통 문서 사이트로 개발자 경험 향상
- **배포 자동화**: 서비스 간 연동 배포 자동화

### ✅ 비즈니스 효과
- **브랜드 일관성**: 외부에 "하나의 플랫폼"으로 인식
- **개발자 경험**: 통합된 문서, 예제, 데모
- **유지보수성**: 공통 코드로 버그 수정 효율성 향상
- **확장성**: 새로운 서비스/패키지 추가 용이

## 📊 전환 난이도 분석

| 항목 | 현재 상태 | 난이도 | 비고 |
|------|-----------|--------|------|
| **패키지 수** | 5~7개 이상 | ⭐⭐⭐⭐☆ | 충분히 의미 있는 규모 |
| **의존 관계** | 명확함 (API → SDK, Chat → API) | ⭐⭐⭐☆ | 초기 세팅만 잘하면 쉬움 |
| **배포 방식** | npm 단일 패키지, 일부 내부 링크 | ⭐⭐⭐⭐☆ | Turborepo가 적합 |
| **기존 코드** | 폴더 기반 정리 완료 | ⭐⭐☆☆☆ | 구조만 옮기면 됨 |

**총 난이도: ⭐⭐⭐☆☆ (중간)**

## 🗓️ 전환 계획

### Phase 1: 기반 구축 (1-2주)
1. **hua-platform 모노레포 생성**
2. **Turborepo 설정 및 기본 구조 구축**
3. **공통 라이브러리 패키지 생성** (`@hua-labs/utils`, `@hua-labs/types`)

### Phase 2: 패키지 마이그레이션 (2-3주)
1. **hua-sdk-lite-v2 마이그레이션**
2. **i18n-sdk 모듈별 분리 및 마이그레이션**
3. **기존 의존성 정리 및 workspace 의존성으로 변경**

### Phase 3: 앱 마이그레이션 (2-3주)
1. **hua-api 마이그레이션**
2. **my-chat 마이그레이션**
3. **hua-demo 마이그레이션**

### Phase 4: 통합 및 최적화 (1-2주)
1. **CI/CD 파이프라인 구축**
2. **문서 사이트 통합**
3. **배포 자동화 설정**

**총 소요 기간: 6-10주**

## 🎯 기대 효과

### 📈 정량적 효과
- **개발 시간 단축**: 30-40% (context 전환 시간 절약)
- **코드 중복 감소**: 50-60% (공통 라이브러리 활용)
- **배포 시간 단축**: 40-50% (자동화로 인한)
- **버그 발생률 감소**: 20-30% (타입 안전성 향상)

### 📊 정성적 효과
- **개발자 경험 향상**: 통합된 개발 환경
- **코드 품질 향상**: 공통 라이브러리로 일관성 확보
- **팀 협업 효율성**: 단일 코드베이스로 협업 용이
- **외부 인식도**: 전문적인 플랫폼으로 인식

## 🤔 고려사항

### ⚠️ 리스크 요소
- **초기 학습 비용**: 팀원들의 모노레포 학습 필요
- **마이그레이션 리스크**: 기존 서비스 영향 최소화 필요
- **도구 복잡성**: Turborepo 등 새로운 도구 학습

### 🛡️ 리스크 완화 방안
- **점진적 마이그레이션**: 한 번에 모든 것을 옮기지 않고 단계별 진행
- **기존 서비스 보호**: 마이그레이션 중에도 기존 서비스 정상 운영
- **충분한 테스트**: 각 단계별 철저한 테스트 진행
- **팀 교육**: 모노레포 관련 교육 및 문서화

## 💰 비용 분석

### 💸 개발 비용
- **개발 시간**: 6-10주 (팀원 2-3명)
- **학습 시간**: 1-2주 (모노레포 도구 학습)
- **테스트 시간**: 2-3주 (통합 테스트)

### 💰 운영 비용
- **CI/CD 비용**: 기존과 동일 (GitHub Actions 무료)
- **호스팅 비용**: 기존과 동일 (Vercel 등)
- **유지보수 비용**: 장기적으로 감소 예상

## 🎯 결론 및 제안

### 🔥 핵심 메시지
> **"지금 구조는 '하나의 감정 인터페이스 플랫폼'이지만,  
> 실제로는 'SDK 따로, API 따로, 앱 따로'인 상태입니다.  
> 모노레포로 통합해야 진짜 하나의 플랫폼이 됩니다."**

### ✅ 권장사항
1. **즉시 모노레포 전환 시작**: 현재가 가장 효율적인 시점
2. **단계적 마이그레이션**: 리스크 최소화를 위한 점진적 접근
3. **팀 교육 병행**: 모노레포 도구 학습과 함께 진행
4. **충분한 테스트**: 각 단계별 철저한 검증

### 🚀 다음 단계
1. **팀장님 승인**: 이 제안서 검토 및 승인
2. **팀 논의**: 팀원들과 전환 계획 상의
3. **기술 검토**: 구체적인 기술 스택 및 도구 선택
4. **일정 수립**: 상세한 마이그레이션 일정 수립

---

**📅 검토 요청**: 이 제안서에 대한 팀장님의 의견과 방향성 지시 부탁드립니다.

**📞 논의 일정**: 모노레포 전환에 대한 상세 논의 일정 조율 부탁드립니다. 