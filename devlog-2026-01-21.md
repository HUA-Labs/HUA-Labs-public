# Devlog 2026-01-21

## 오늘의 목표
- [x] 대시보드 컴포넌트 문서 하단 네비게이션 추가
- [x] ComponentDocNavigation / HookDocNavigation 레지스트리 연결
- [x] 누락된 컴포넌트 문서 생성 (logo, scrollbar)
- [x] 레지스트리 관리법 README 작성
- [x] i18n 누락 키 추가

---

## 네비게이션 레지스트리 연결

### 1. ComponentDocNavigation 개선

**문제:**
- 하드코딩된 52개 컴포넌트 배열 사용
- 레지스트리에는 103개 컴포넌트 존재
- 대시보드 컴포넌트들 네비게이션 누락

**해결:**
```typescript
// Before: 하드코딩
const componentOrder: NavItem[] = [
  { title: "Overview", href: "/docs/components" },
  { title: "Accordion", href: "/docs/components/accordion" },
  // ... 52개 하드코딩
];

// After: 레지스트리 연결
import { generatedFlatList } from "@/config/componentRegistry.generated";

const componentOrder: NavItem[] = generatedFlatList
  .filter((item) => item.id !== "overview")
  .map((item) => ({
    title: formatComponentName(item.id),
    href: item.href,
    badge: item.badge,
  }));
```

**변경 파일:**
- `apps/hua-docs/components/docs/ComponentDocNavigation.tsx`

### 2. HookDocNavigation 개선

**동일한 패턴 적용:**
```typescript
import { generatedFlatList } from "@/config/hooksRegistry.generated";

const hookOrder: HookNavItem[] = generatedFlatList
  .filter((item) => item.id !== "overview")
  .map((item) => ({
    title: formatHookName(item.id),
    href: item.href,
    badge: item.badge,
  }));
```

**변경 파일:**
- `apps/hua-docs/components/docs/HookDocNavigation.tsx`

### 3. isKo / titleKo 제거

**이유:**
- 컴포넌트/훅 이름은 번역할 필요 없음
- `isKo` 체크 불필요

**변경 사항:**
- `useTranslation` import 제거
- `isKo` 변수 제거
- `titleKo` 필드 제거
- `title` 필드만 사용

---

## 수동 네비게이션 컴포넌트 수정

### 10개 컴포넌트 DocNavigation → ComponentDocNavigation 전환

**수정된 파일:**
1. `animated-gradient/page.tsx`
2. `page-transition/page.tsx`
3. `text-reveal/page.tsx`
4. `carousel/page.tsx`
5. `drawer/page.tsx`
6. `form-control/page.tsx`
7. `glow-card/page.tsx`
8. `marquee/page.tsx`
9. `number-input/page.tsx`
10. `parallax/page.tsx`
11. `slider/page.tsx`
12. `textarea/page.tsx`
13. `video-background/page.tsx`

**패턴:**
```typescript
// Before
import { DocNavigation } from "@/components/docs/ComponentDoc";
<DocNavigation prev={{ ... }} next={{ ... }} />

// After
import { ComponentDocNavigation } from "@/components/docs/ComponentDocNavigation";
<ComponentDocNavigation />
```

---

## 레지스트리 정리

### timeline 중복 제거

**문제:**
- `componentRegistry.yaml`에 timeline이 두 번 등록됨
  - data-display 카테고리
  - dashboard 카테고리

**해결:**
- dashboard 카테고리에서 timeline 제거
- data-display 카테고리의 timeline만 유지

**최종 카운트:**
- 레지스트리: 102개 컴포넌트
- 문서: 101개 (overview 포함)

---

## 누락 문서 생성

### 1. Logo 문서 페이지

**파일:** `apps/hua-docs/app/docs/components/logo/page.tsx`

**내용:**
- variant 데모 (symbol / full)
- size 데모 (sm / md / lg / custom rem)
- animation 데모 (path drawing effect)
- Props 테이블
- 접근성 정보

**특이사항:**
- Alert로 "예시 로고" 안내 추가
- i18n 키: `docs:components.logo.exampleNotice`

### 2. Scrollbar 문서 페이지

**파일:** `apps/hua-docs/app/docs/components/scrollbar/page.tsx`

**내용:**
- variant 데모 (default / glass / minimal / neon)
- size 데모 (sm / md / lg / xl)
- orientation 데모 (vertical / horizontal / both)
- Props 테이블
- 접근성 정보

---

## README 생성

### 레지스트리 관리법 문서화

**파일:** `apps/hua-docs/README.md`

**내용:**
1. 파일 구조 설명
2. 컴포넌트 추가/수정 방법
   - YAML 파일 수정
   - 레지스트리 재생성 명령어
   - 문서 페이지 생성
3. 훅 추가/수정 방법
4. 네비게이션 설명
5. 아이콘 추가 방법

---

## i18n 키 추가

### merchant-list 관련 키

**문제:**
- merchant-list 페이지에서 버튼/뱃지 텍스트 누락

**추가된 키:**
| 키 | EN | KO |
|---|---|---|
| byHealthStatus | By Health Status | 건강 상태별 |
| normal | Normal | 정상 |
| warning | Warning | 경고 |
| critical | Critical | 위험 |
| loadingState | Loading State | 로딩 상태 |
| emptyState | Empty State | 빈 상태 |
| animation | Animation | 애니메이션 |

### 추가 누락 키 (전체 검사)

**추가된 키 (21개):**
| 키 | EN | KO |
|---|---|---|
| close | Close | 닫기 |
| collapsed | Collapsed | 접힌 상태 |
| colors | Colors | 색상 |
| controlled | Controlled | 제어됨 |
| customOptions | Custom Options | 커스텀 옵션 |
| dateRange | Date Range | 날짜 범위 |
| description | Description | 설명 |
| expanded | Expanded | 펼친 상태 |
| loading | Loading | 로딩 |
| paymentMethod | Payment Method | 결제 수단 |
| pgRouting | PG Routing | PG 라우팅 |
| requestRefund | Request Refund | 환불 요청 |
| responsive | Responsive | 반응형 |
| statusTypes | Status Types | 상태 유형 |
| viewDetails | View Details | 상세 보기 |
| weekdays | Weekdays | 평일 |
| withActions | With Actions | 액션 포함 |
| withBadge | With Badge | 뱃지 포함 |
| withHighlight | With Highlight | 하이라이트 포함 |
| withSettlement | With Settlement | 정산 포함 |

**변경 파일:**
- `apps/hua-docs/public/translations/en/docs.json`
- `apps/hua-docs/public/translations/ko/docs.json`

---

## 빌드 확인

### hua-ui 빌드 ✅
```bash
pnpm build
# 368 files processed
```

### hua-docs 빌드 ✅
```bash
pnpm build
# 모든 페이지 정상 빌드
# logo, scrollbar 포함 101개 컴포넌트 문서
```

---

---

## i18n YAML 기반 시스템 구축 (추가 작업)

### YAML 기반 번역 관리 시스템

**새 파일:**
- `config/docsTranslations.yaml` - 번역 SSOT
- `scripts/generate-docs-translations.ts` - YAML → JSON 생성
- `scripts/analyze-and-consolidate-i18n.ts` - 중복 분석
- `scripts/migrate-to-common-keys.ts` - 코드 자동 마이그레이션

**분석 결과:**
| 항목 | 수치 |
|------|------|
| 총 번역 키 | 2,105개 |
| 중복 값 | 169개 |
| 통합 가능 위치 | 551개 |
| 실제 마이그레이션 | 168개 |

### 자동 마이그레이션

**변경 패턴:**
```tsx
// Before
t('docs:components.button.demo.basic')

// After
t('docs:common.basicUsage')
```

**수정된 파일:** 57개 (컴포넌트 51 + 훅 6)

### tsconfig 수정

`scripts` 폴더를 빌드에서 제외:
```json
"exclude": ["node_modules", "scripts"]
```

---

## 향후 작업 계획

### Plan 1: i18n 중복 키 통합 ✅ 완료

**현황:**
- 각 컴포넌트 문서에서 동일한 키를 개별 정의
- 예: "기본 사용법", "변형", "크기" 등이 여러 곳에 중복

**목표:**
- 공통 키는 `docs:common`으로 통합
- 컴포넌트별 고유 키만 `docs:components.[name]`에 유지

**작업 단계:**
1. 전체 번역 파일 분석
2. 중복 키 목록 추출
3. common 섹션으로 이동
4. 각 컴포넌트 문서에서 common 키 사용하도록 수정
5. 미사용 키 정리

**예상 효과:**
- 번역 파일 크기 감소
- 일관성 향상
- 유지보수 용이

### Plan 2: 컴포넌트 코드 ↔ 문서 검수

**현황:**
- 실제 컴포넌트 코드와 문서 간 불일치 가능성
- Props 정의, 타입, 기본값 등

**검수 항목:**
1. **Props 검증**
   - 문서의 Props 테이블 vs 실제 컴포넌트 타입 정의
   - 누락된 props, 잘못된 타입, 틀린 기본값

2. **Import 경로 확인**
   - 문서의 import 예시가 실제 export와 일치하는지
   - 패키지 경로 정확성

3. **코드 예시 실행 가능성**
   - 문서의 코드 예시가 실제로 동작하는지
   - 컴파일 오류 없는지

4. **버전 정보**
   - since 버전이 정확한지
   - deprecated 표시 필요한 컴포넌트 확인

**자동화 방안:**
1. TypeScript AST 분석으로 컴포넌트 props 추출
2. 문서 파일에서 props 테이블 파싱
3. 비교 리포트 생성
4. CI/CD에 검증 스크립트 추가

**수동 검수 우선순위:**
1. 자주 사용되는 기본 컴포넌트 (Button, Input, Card 등)
2. 최근 추가/수정된 컴포넌트
3. Pro/Advanced 컴포넌트

---

## 문서화 현황

**레지스트리 기준:**
- 컴포넌트: 102개
- 훅: 27개

**문서 페이지:**
- 컴포넌트: 101개 (overview 포함)
- 훅: 27개 (overview 포함)

**네비게이션:**
- 모든 문서 페이지에 ComponentDocNavigation / HookDocNavigation 적용 완료

---

## 메모

### YAML 레지스트리 시스템 장점

1. **SSOT (Single Source of Truth)**
   - 사이드바, 네비게이션, 번역이 모두 YAML에서 생성
   - 수정할 곳이 한 군데

2. **타입 안전성**
   - TypeScript 파일 자동 생성
   - IDE 자동완성 지원

3. **확장성**
   - 새 필드 추가 용이 (badge, icon, status 등)
   - 카테고리 구조 변경 쉬움

### 개선 가능 영역

1. **번역 자동 생성**
   - YAML에서 번역 JSON도 생성하면 더 일관됨
   - 현재는 수동으로 docs.json 업데이트

2. **문서 페이지 스캐폴딩**
   - 레지스트리에서 문서 템플릿 자동 생성
   - 누락된 문서 감지 스크립트
